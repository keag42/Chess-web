<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chessboard</title>
    <link rel="stylesheet" href="css/chessBuilder.css">
    <script src="logic/chessBoard.js"></script>
    <script src="logic/Pieces.js"></script>  <!--change to lowercase P-->
    <script src="logic/driver.js"></script>
</head>

<body>
    <h1>Chess Game</h1>

    <div id="chessboard-wrapper">
        <div id="letters">
            <span>a</span><span>b</span><span>c</span><span>d</span><span>e</span><span>f</span><span>g</span><span>h</span>
        </div>
        <div id="chessboard">
            <!-- The chessboard squares will be dynamically added here -->
        </div>
        <div id="numbers">
            <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const board = document.getElementById("chessboard");
            let chessboardArray = [];  // 2D array to store references to squares

            // Create the chessboard grid and store references in the 2D array
            for (let row = 0; row < 8; row++) {
                let rowArray = []; // Temporary array for the current row
                for (let col = 0; col < 8; col++) {
                    const square = document.createElement("div");

                    // add piece
                    generatePieces(row, col, square);
                    //add piece

                    square.classList.add("square", (row + col) % 2 === 0 ? "light" : "dark");
                    square.dataset.row = row;   // Store row in the div
                    square.dataset.col = col;   // Store column in the div
                    board.appendChild(square);
                    rowArray.push(square);  // Add the square to the current row array
                }
                chessboardArray.push(rowArray);  // Add the row array to the main chessboard array
            }

            let a1Square = chessboardArray[0][0]; // Row 0, Column 0 (a1)
            console.log(a1Square);  // It will log the div element for a1

            // Example: Access square at row 7, col 7 (h8)
            let h8Square = chessboardArray[7][7]; // Row 7, Column 7 (h8)
            console.log(h8Square);  // It will log the div element for h8
        });


        function generatePieces(row, col, square) {
            // Define piece setup for both white and black pieces
            const pieces = {
                0: ["rook-W", "horse-W", "bishop-W", "queen-W", "king-W", "bishop-W", "horse-W", "rook-W"],  // White pieces row (0)
                1: ["pawn-W", "pawn-W", "pawn-W", "pawn-W", "pawn-W", "pawn-W", "pawn-W", "pawn-W"],          // White pawns row (1)
                6: ["pawn-B", "pawn-B", "pawn-B", "pawn-B", "pawn-B", "pawn-B", "pawn-B", "pawn-B"],          // Black pawns row (6)
                7: ["rook-B", "horse-B", "bishop-B", "queen-B", "king-B", "bishop-B", "horse-B", "rook-B"],  // Black pieces row (7)
            };

            // Check if the row has a piece setup
            if (pieces[row]) {
                const piece = pieces[row][col];
                if (piece) {
                    const img = document.createElement("img");
                    img.src = `../css/img/${piece}.svg`;  // Image path based on piece name
                    img.alt = piece.split("-")[1];  // Alt text as the piece color (W/B)
                    square.appendChild(img);  // Append the image to the square
                }
            }
        }

    </script>
</body>

</html>
